# 0219 SSO ( ****SAML,**** OIDC, OAuth, ****Kerberos**** )

## SSO 란 ??

일단 단어의 뜻인 single sign on 그대로 하나의 로그인 시스템에서 로그인을 관리하는 것을 말합니다.

> Single Sign-On(SSO)은 1회 사용자 인증으로 다수의 애플리케이션 및 웹사이트에 대한 사용자 로그인을 허용하는 인증 솔루션입니다. 요즘 사용자들은 브라우저에서 직접 애플리케이션에 자주 액세스하기 때문에 조직은 보안 및 사용자 경험 모두를 개선하는 액세스 관리 전략에 우선 순위를 둡니다. SSO는 한 번 자격 증명이 검증된 사용자에게는 반복되는 로그인 없이 모든 암호 보호 리소스에 액세스하도록 하여 보안과 사용자 경험을 모두 충족할 수 있습니다.
> 

이로써 얻을 수 있는 장점과 단점을 생각해보자.

사용자는 하나의 계정을 사용함으로써 **여러 비밀번호로 생길 수 있는 혼란을 줄일 수** 있고, 이로인해 **관리가 소훌한 계정이 생기거나 잃어버리는 위험**이 줄어든다. 하지만 이것은 반대로 **단 하나의 비밀번호가 유출되면 많은 어플리케이션의 보안 문제가 발생**할 수 있다. 

### 사용자 입장

 그래도 나는 하나의 인증 서비스로 관리가 편해지는 것이 좋다고 생각한다. 여러 검증되지 않은 로그인 시스템 수백 개의 나의 개인 계정과 비밀번호가 들어가 있으면, 단 하나만 뚫여도 비슷하게 작성해둔 계정과 비밀번호를 탈취당해게 된다. ( 물론 보안에 소훌했던게 맞지만 모든 사이트에 비밀번호 다르게 하고 그걸 외울 자신은 없다. )

### 개발자 입장

또한 도입하는 개발적인 입장에서는 인증 시스템을 새로 구축하지 않기 때문에 생산성에 좋다고 생각한다. 자체 인증 부분이 있는 것도 좋지만, 여러 인증 수단들을 간단하게 연동하여서 가지고 올 수 있어서 너무 좋은 것 같다. 또한 SSO를 제공하는 업체에 다양한 고객들이 쉽게 접근할 수 있어서 좋은거 같다. ( 솔직히 새로 가입하고 전화 인증하고 그러는거 만드는것도 관리하는 것도 서비스를 해보니 쉽지가 않다. )

 다만 다른 서비스를 빌리는 것이니 그쪽이 안되면 나는 그것을 고칠 수도 간섭할 수도 없는 상황이 생긴다. 그럼으로 예비 로그인등을 만들어두는게 좋을 것 같다.

예를 들어 )

1. 기본은 SSO 로그인을 사용하게함 ( 이메일 기반 )
2. SSO 로그인 시스템이 안될 경우 접속할 수 있게 이메일을 이용한 로그인 시스템 개발
3. 이 로그인 시스템은 이메일에 임시 비밀번호 ( 짧은 시간 유효하며, 1 회용 ) 를 주고 그것으로 로그인 하는 시스템을 임시로 허가
4. SSO 로그인 시스템이 복구되면 다시 해당 시스템으로 로그인하고 이메일 로그인 기능은 fadeout
5. 복구 안되면 고소… 고소가 가능한가 ?? 이건 나중에 한 번 생각해봐야할 것 같다.

## ****SSO 유형에는 어떤 것들이 있나요?****

**SAML**

> SAML 또는 Security Assertion Markup Language는 애플리케이션이 SSO 서비스와 인증 정보를 교환하는 데 사용하는 프로토콜 또는 규칙 집합입니다. SAML은 브라우저 친화적인 마크업 언어인 XML을 사용하여 사용자 식별 데이터를 교환합니다. SAML 기반 SSO 서비스는 애플리케이션이 사용자 보안 인증 정보를 시스템에 저장할 필요가 없으므로 더 나은 보안과 유연성을 제공합니다.
> 

> SAML 인증은 다른 곳보다 업무 환경에서 경험했을 가능성이 높습니다. 예를 들어 기업 인트라넷이나 IdP에 로그인한 후 자격 증명을 다시 입력하지 않고도 Salesforce, Box 또는 Workday와 같은 별도의 서비스에 액세스할 수 있기 때문입니다. SAML는 IdP와 서비스 공급업체 사이에서 인증 및 권한 인증 데이터를 교환하는 데 사용되는 XML 기반 표준으로, 사용자의 아이덴티티와 권한을 확인한 후 서비스에 대한 액세스를 허용하거나 거부합니다.
> 

**OAuth**

> OAuth 또는 Open Authorization은 애플리케이션이 암호를 제공하지 않고도 다른 웹 사이트의 사용자 정보에 안전하게 액세스할 수 있도록 하는 개방형 표준입니다. 애플리케이션은 사용자 암호를 요청하는 대신 OAuth를 사용하여 암호로 보호된 데이터에 액세스할 수 있는 사용자 권한을 얻습니다. OAuth는 API를 통해 애플리케이션 간의 신뢰 관계를 설정하며, 애플리케이션은 이를 통해 설정된 프레임워크에서 인증 요청을 보내고 응답할 수 있습니다.
> 

> 예를 들어 새로운 애플리케이션에 가입하면서 Facebook이나 휴대전화 연락처를 통해 새로운 연락처를 자동으로 제공하는 데 동의했다면 OAuth 2.0을 사용했을 가능성이 높습니다. 이 표준은 안전한 위임 액세스를 제공하기 때문입니다. 다시 말해서 애플리케이션이 자격 증명을 공유하지 않고도 사용자를 대신해 서버에서 리소스에 액세스할 수 있습니다. 이것이 가능한 이유는 [아이덴티티 공급업체(IdP)](https://www.okta.com/identity-101/why-your-company-needs-an-identity-provider/)
가 사용자의 승인을 받아 타사 애플리케이션에 토큰을 발행할 수 있기 때문입니다.
> 

**OIDC**

> OpenID는 단일 사용자 보안 인증 정보 세트를 사용하여 여러 사이트에 액세스하는 방법입니다. 이를 통해 서비스 공급자가 사용자 보안 인증 정보를 인증하는 역할을 할 수 있습니다. 웹 애플리케이션은 인증 토큰을 서드 파티 ID 공급자에게 전달하는 대신, OIDC를 사용하여 추가 정보를 요청하고 사용자의 신뢰성을 검증합니다.
> 

> Google을 사용해 YouTube 등의 애플리케이션에 로그인하거나, Facebook을 사용해 온라인 쇼핑 카트에 로그인한다면 이러한 인증 옵션에 대해 잘 알고 있는 셈입니다. OpenID Connect는 사용자 인증에 사용되는 개방형 표준입니다. IdP가 이 표준을 사용하는 이유는 사용자가 IdP에 로그인한 후 다시 로그인하거나 로그인 정보를 공유하지 않고도 다른 웹사이트와 앱에 액세스할 수 있기 때문입니다.
> 

**Kerberos**

> Kerberos는 둘 이상의 당사자가 네트워크에서 신원을 서로 검증할 수 있는 티켓 기반 인증 시스템입니다. 보안 암호화를 사용하여 서버, 클라이언트 및 키 배포 센터 간에 전송되는 식별 정보에 대한 무단 액세스를 방지합니다.
> 

### 각 표준의 차이점

세 가지 표준의 가장 큰 차이점은 OAuth 2.0이 애플리케이션이나 파일과 같이 보호를 받는 리소스에 대한 권한 인증을 제어하는 프레임워크인 반면 OpenID Connect와 SAML은 페더레이션 인증에 관한 업계 표준이라는 데 있습니다. 따라서 OAuth 2.0은 근본적으로 나머지 두 표준과 다른 상황에서 사용되지만(아래 예시 참조), OpenID Connect나 SAML과 함께 사용되기도 합니다.

기업은 OpenID Connect나 SAML 중 하나를 사용하여 사용자 인증을 달성하고 SSO(Single Sign-On)를 구축할 수 있습니다. 두 표준 모두 로그인을 처리하지만 장단점이 다릅니다.

- OpenID Connect는 OAuth 2.0 프로토콜을 기반으로 개발되어 ID 토큰이라고 불리는 JWT(JSON Web Token)를 사용해 범위, 엔드포인트 탐색 등 OAuth 2.0에서 선택 영역을 표준화합니다. 특히 사용자 인증에 초점을 맞추기 때문에 일반 웹사이트 및 모바일 앱에서 사용자 로그인을 활성화하는 데 널리 사용됩니다.
- SAML은 OAuth와 관련이 없으며, JWT와 달리 메시지 교환을 통해 XML SAML 형식으로 인증합니다. 이 표준은 기업 사용자가 단일 로그인을 사용해 다수의 애플리케이션에 로그인하는 데 주로 사용됩니다.

## 오늘의 공부후 궁금증

- sso 서비스가 만약 먹통이 되어서 내가 운영하는 서비스의 로그인에 피해를 주었을때 고소는 가능한가 ??
    - 정책에 관하여 네이버랑 카카오에 잘 안나와있는거 같아서 문의 보냄
    - 네이버 문의하기 불편하니 내일 전화 09:00~18:00
- 마지막으로 편리한 로그인인 만큼 이런 계정들은 꼭 2FA ( 2 단계 인증 )이 꼭 있어야 한다고 생각한다. 특히 이런 계정에 대한 공격은 기술적인 부분뿐만 아니라 사회공학적인 공격도 가능하니 꼭 조심해야한다고 생각한다.
    - 2FA에 대해서도 한 번 공부해보자

---

출처

[https://aws.amazon.com/ko/what-is/sso/](https://aws.amazon.com/ko/what-is/sso/)

[https://www.itworld.co.kr/howto/193849](https://www.itworld.co.kr/howto/193849)

[https://www.okta.com/kr/identity-101/whats-the-difference-between-oauth-openid-connect-and-saml/](https://www.okta.com/kr/identity-101/whats-the-difference-between-oauth-openid-connect-and-saml/)
